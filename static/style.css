:root {
    --bg: #f8fafc;
    --panel: #ffffff;
    --text: #0f172a;
    --muted: #64748b;
    --border: #e2e8f0;
    --accent: #2563eb;
    --accent-weak: rgba(37, 99, 235, 0.12);
    --shadow-md: 0 8px 24px rgba(2, 6, 23, 0.06), 0 2px 6px rgba(2, 6, 23, 0.04);
}

* { box-sizing: border-box; }

body {
    margin: 0;
    background: radial-gradient(1200px 600px at 10% -10%, #eef2ff 0%, rgba(238, 242, 255, 0) 60%),
                radial-gradient(1000px 500px at 110% 10%, #f0f9ff 0%, rgba(240, 249, 255, 0) 60%),
                var(--bg);
    color: var(--text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 32px 20px 48px;
}

.page-header h1 {
    margin: 0 0 8px;
    font-size: 32px;
    line-height: 1.2;
    font-weight: 700;
    color: var(--text);
}

.page-header .subtitle {
    margin: 0 0 20px;
    color: var(--muted);
}

.page-header .header-top { display: flex; align-items: center; justify-content: space-between; gap: 12px; }

.title-group { display: inline-flex; align-items: center; gap: 12px; }

.brand-logo {
    width: 75px;
    height: 75px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.18));
}

.alert {
    background: #fee2e2;
    color: #7f1d1d;
    border: 1px solid #fecaca;
    padding: 10px 12px;
    border-radius: 10px;
    margin: 12px 0 20px;
}

.card {
    background: var(--panel);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-md);
    border-radius: 16px;
    padding: 18px;
}

.input-options {
    display: flex;
    gap: 16px;
    align-items: center;
    flex-wrap: wrap;
    margin-bottom: 12px;
    background: var(--panel);
}

.option {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    border: 1px solid var(--border);
    border-radius: 999px;
    background: var(--panel);
}
.option input[type="radio"] { margin: 0; }
.option label {
    color: var(--text);
    background: transparent;
    display: inline-flex;
    align-items: center;
    line-height: 1.2;
}

/* Nudge radios to vertically center with text across browsers */
.option input[type="radio"] {
    align-self: center;
    vertical-align: middle;
    transform: translateY(-1px);
}
.option label { color: var(--text); }

.input-fields {
    display: grid;
    gap: 12px;
}

/* Hide input fields until dynamically shown */
#manual-input, #csv-input, #submit { display: none; }

textarea#manual-input {
    width: 100%;
    min-height: 180px;
    padding: 12px 14px;
    border: 1px solid var(--border);
    border-radius: 12px;
    background: var(--panel);
    resize: vertical;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 14px;
    line-height: 1.5;
}

input[type="file"]#csv-input {
    display: inline-block;
    padding: 10px 12px;
    border: 1px dashed var(--border);
    border-radius: 12px;
    background: var(--panel);
}

/* Ensure radio controls fit theme */
input[type="radio"] {
    accent-color: var(--accent);
}

/* Extra specificity to defeat thirdâ€‘party defaults in dark mode */
form.card,
.card,
.input-options,
.input-options .option {
    background: var(--panel) !important;
}

.input-options label { color: var(--text); background: transparent; }

.actions { margin-top: 6px; }

.btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: var(--panel);
    color: var(--text);
    cursor: pointer;
    text-decoration: none;
    transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease;
}

.btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); }

.btn-primary {
    background: linear-gradient(180deg, #2563eb, #1d4ed8);
    color: #fff;
    border-color: #1d4ed8;
}

.btn-primary:hover {
    background: linear-gradient(180deg, #1e40af, #1d4ed8);
}

.icon-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: var(--panel);
    box-shadow: var(--shadow-md);
    cursor: pointer;
    transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease;
}

.icon-button:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); background: var(--accent-weak); }

.sort-button {
    background: var(--panel);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 8px 12px;
    cursor: pointer;
    transition: background 120ms ease, box-shadow 120ms ease, transform 120ms ease;
}

.sort-button:hover { background: var(--accent-weak); box-shadow: var(--shadow-md); transform: translateY(-1px); }

.table-controls {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 18px 0 12px;
}

.sort-controls { display: inline-flex; align-items: center; gap: 8px; margin-left: auto; }
.sort-controls h5 { margin: 0 8px 0 0; color: var(--muted); font-size: 14px; font-weight: 600; }

.table-wrap { width: 100%; overflow-x: auto; border: 1px solid var(--border); border-radius: 12px; background: var(--panel); box-shadow: var(--shadow-md); }

table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
}

th, td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--border);
    text-align: left;
    vertical-align: top;
}

th { position: sticky; top: 0; background: #f8fafc; font-weight: 700; font-size: 13px; color: var(--muted); }

tr:nth-child(even) td { background: #fcfdff; }
tr:hover td { background: #f1f5f9; }

td {
    color: var(--text);
    max-width: 28ch;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

@media (max-width: 640px) {
    .container { padding: 20px 14px 32px; }
    .page-header h1 { font-size: 26px; }
    td { max-width: 18ch; }
}

/* Spinner */
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

#loading {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.35);
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
    z-index: 9999;
    display: none;
    justify-content: center;
    align-items: center;
}

#loading-content {
    background: var(--panel);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-md);
    padding: 20px 24px;
    border-radius: 14px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#loading-spinner { width: 84px; height: 84px; animation: spin 1.2s linear infinite; }
#timer { margin-top: 12px; color: var(--muted); font-weight: 600; }

/* Dark theme variables */
[data-theme="dark"] {
    --bg: #0b1220;
    --panel: #0f172a;
    --text: #e5e7eb;
    --muted: #9ca3af;
    --border: #1f2937;
    --accent: #60a5fa;
    --accent-weak: rgba(96, 165, 250, 0.14);
    --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.35), 0 2px 6px rgba(0, 0, 0, 0.25);
}

[data-theme="dark"] body {
    background: radial-gradient(1200px 600px at 10% -10%, rgba(2, 6, 23, 0.6) 0%, rgba(2, 6, 23, 0) 60%),
                radial-gradient(1000px 500px at 110% 10%, rgba(8, 51, 68, 0.5) 0%, rgba(8, 51, 68, 0) 60%),
                var(--bg);
}

[data-theme="dark"] .btn { background: var(--panel); border-color: var(--border); color: var(--text); }
[data-theme="dark"] .btn-primary { background: linear-gradient(180deg, #1d4ed8, #1e40af); border-color: #1e3a8a; }
[data-theme="dark"] .sort-button { background: var(--panel); border-color: var(--border); color: var(--text); }
[data-theme="dark"] .table-wrap { background: var(--panel); border-color: var(--border); }
[data-theme="dark"] th { background: #0b1220; color: var(--muted); }
[data-theme="dark"] tr:nth-child(even) td { background: #0c1426; }
[data-theme="dark"] tr:hover td { background: #0e1a33; }
[data-theme="dark"] .option { background: var(--panel); }
[data-theme="dark"] textarea#manual-input, [data-theme="dark"] input[type="file"]#csv-input { background: var(--panel); color: var(--text); border-color: var(--border); }
[data-theme="dark"] .icon-button { background: var(--panel); border-color: var(--border); }